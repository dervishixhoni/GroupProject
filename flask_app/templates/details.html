{% extends "base.html" %}
{% block content %}

<!-- details -->
<section class="section section--details">
	<!-- details content -->
	<div class="container">
		<div class="row">
			<!-- title -->
			<div class="col-12">
				<h1 class="section__title section__title--mb">{{movie['title']}}</h1>
			</div>
			<!-- end title -->

			<!-- content -->
			<div class="col-12 col-xl-6">
				<div class="card card--details">
					<div class="row">
						<!-- card cover -->
						<div class="col-12 col-sm-5 col-md-4 col-lg-3 col-xl-5">
							<div class="card__cover">
								<img src="https://image.tmdb.org/t/p/w500{{movie['poster_path']}}" alt="">
								<span class="card__rate card__rate--yellow">{{movie['vote_average']|round(1)}}</span>
							</div>
							{% if movie['id'] not in watchlist %}
							<form action="/watch/{{movie['id']}}" method="post">
								<input type="hidden" class="title" name="title" value="{{movie['title']}}"/>
								<input type="hidden" class="release_year" name="release_year" value="{{movie['release_date']}}"/>
								<input type="hidden" class="rating" name="rating" value="{{ movie['vote_average'] }}"/>
								<button class="filter__btn" type="submit">
									<span>Add to favorites</span>
								</button>
							</form>
							{% else %}
							<a href="/remove/{{movie['id']}}" class="filter__btn">
								<span>Remove</span>
							</a>
							{% endif %}
						</div>
						<!-- end card cover -->

						<!-- card content -->
						<div class="col-12 col-md-8 col-lg-9 col-xl-7">
							<div class="card__content">
								<ul class="card__meta">
									<li><span>Genre:</span>
										{% for g in movie['genres'] %}
										<a href="#">{{g['name']}}</a>
										{% endfor %}
									</li>
									<li><span>Release date:</span>{{movie['release_date']}}</li>
									<li><span>Running time:</span>{{movie['runtime']}} min</li>
									<li><span>Country:</span> <a
											href="#">{{movie['production_countries'][0]['name']}}</a></li>
								</ul>
								<div class="card__description">
									{{movie['tagline']}}
								</div>
							</div>
						</div>
						<!-- end card content -->
					</div>
				</div>
			</div>
			<!-- end content -->
			<div class="col-12 col-xl-6 d-flex align-items-center">
				<iframe id="player" width="560" height="315" src="https://www.youtube.com/embed/{{trailer}}"
					title="YouTube video player" frameborder="0"
					allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
					allowfullscreen></iframe>
			</div>
		</div>
	</div>
	<!-- end details content -->
</section>
<!-- end details -->

<!-- content -->
<section class="content">
	<div class="content__head">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<!-- content title -->
					<h2 class="content__title">You may also like...</h2>
					<div class="row row--grid">
						<!-- end section title -->
						{% for rec in recommendations['results'][:18] %}
						<!-- card -->
						<div class="col-6 col-sm-4 col-md-3 col-xl-2">
							<div class="card">
								<div class="card__cover">
									<img src="https://image.tmdb.org/t/p/w500{{rec['poster_path']}}" alt="">
									<a href="/details/{{rec['id']}}" class="card__play">
										<i class="icon ion-ios-play"></i>
									</a>
									<span class="card__rate card__rate--yellow">{{rec['vote_average']|round(1)}}</span>
								</div>
								<div class="card__content">
									<h3 class="card__title"><a href="/details/{{rec['id']}}">{{rec['title']}}</a></h3>
									<span class="card__category">
										{% for g in rec['genre_ids'] %}
										<a href="/catalog/{{g}}">{{genredict[g]}}</a>
										{%endfor%}
									</span>
								</div>
							</div>
						</div>
						<!-- end card -->
						{% endfor %}
					</div>
				</div>
				<!-- end sidebar -->
			</div>
		</div>
	</div>
</section>
<!-- end content -->

{% endblock %}